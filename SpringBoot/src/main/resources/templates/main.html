<!DOCTYPE html>
<html xmlns:th="https://www.thymeleaf.org/" lang="ko">
<head>
<meta charset="UTF-8">
<title>ë¬¸ì œ? Issue!</title>

<!-- CSS ë§í¬ -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
  <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="arrow-right-short" fill="currentColor" viewBox="0 0 16 16">
    <path fill-rule="evenodd" d="M8.146 4.646a.5.5 0 0 1 .708 0L12 7.793a.5.5 0 0 1 0 .707l-3.146 3.147a.5.5 0 0 1-.708-.707L10.293 8H4.5a.5.5 0 0 1 0-1h5.793L8.146 5.354a.5.5 0 0 1 0-.708z"/>
  </symbol>
</svg>
  
   
  <link href="/css/style.css" rel="stylesheet">

<!-- JS ë§í¬ -->
<script
   src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
<script
   src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<script type="text/javascript" src="js/search.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script async src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" crossorigin="anonymous"></script>
<style>
/* âœ… container ê°•ì œ í†µì¼ */
.container {
   max-width: 1440px !important;
   width: 100%;
   margin-left: auto;
   margin-right: auto;
   padding-left: 12px;
   padding-right: 12px;
   box-sizing: border-box;
}

#plan-usage-slider {
  transition: opacity 0.5s ease-in-out;
  opacity: 1;
}
.fade-out {
  opacity: 0;
}
</style>
</head>
<body>
   
   <div class="container">

      <!-- âœ… ê²°ì œ ì„±ê³µ ë©”ì‹œì§€ í‘œì‹œ -->
      <div th:if="${paymentSuccess}" class="alert alert-success mt-3"
         role="alert">
         <span th:text="${paymentSuccess}">ê²°ì œê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!</span>
      </div>


   <!-- ğŸ”· ì»¤ìŠ¤í…€ í—¤ë” -->

   <nav class="custom-header">
      <div
         class="container d-flex justify-content-between align-items-center">
         <!-- âœ… ì—¬ê¸°ë§Œ ì‚¬ìš© -->
         <div class="logo d-flex align-items-center gap-2">
            <a href="/"> <img src="/images/ë¡œê³ .png" height="40" alt="ë¡œê³ ">
               <span class="logo-text"></span>
            </a>
         </div>

         <!-- âœ… ë¡œê·¸ì•„ì›ƒ ë©”ì‹œì§€ í‘œì‹œ -->
         <div th:if="${logoutMessage}" class="alert alert-success"
            role="alert" th:text="${logoutMessage}">ì„±ê³µì ìœ¼ë¡œ ë¡œê·¸ì•„ì›ƒë˜ì—ˆìŠµë‹ˆë‹¤.</div>
         <div class="header-links d-flex gap-2">
            <!-- âŒ ë¡œê·¸ì¸í•˜ì§€ ì•Šì€ ê²½ìš° -->
            <th:block th:if="${session.info == null}">
               <a href="login" class="btn btn-outline-primary">LOGIN</a>
            </th:block>

            <!-- âœ… ë¡œê·¸ì¸í•œ ê²½ìš° -->
            <th:block th:unless="${session.info == null}">
               <a href="mypage" class="btn btn-outline-secondary">MYPAGE</a>
               <form th:action="@{/logout}" method="post" class="d-inline">
                  <input type="hidden" th:name="${_csrf.parameterName}"
                     th:value="${_csrf.token}" />
                  <button type="submit" class="btn btn-outline-danger">LOGOUT</button>
               </form>
            </th:block>
         </div>
      </div></nav>

      <!-- ğŸ” ê²€ìƒ‰ ë° í‚¤ì›Œë“œ ì¶”ì²œ -->
      <div class="main-content">
         <section class="row search-section mb-5">
            <!-- ğŸ” ê²€ìƒ‰ì°½ + ë²„íŠ¼ ë¬¶ìŒ -->
            <div class="search-group">
               <div class="search-group">
           <div class="search-container position-relative">
             <div class="search-box d-flex align-items-center rounded-pill shadow-sm px-3 py-2 bg-white border">
               <input id="searchInput" type="text" class="form-control border-0 flex-grow-1"
                      placeholder="ìê²©ì¦ ê²€ìƒ‰" autocomplete="off" />
               <button id="clearBtn" title="Clear" type="button" class="btn btn-link text-dark ">âœ•</button>
               <button id="searchBtn" type="button" class="btn btn-link text-primary px-2">
                 <i class="bi bi-search fs-5"></i>
               </button>
             </div>

                <!-- ìë™ì™„ì„± ëª©ë¡ -->
                <div id="suggestions" class="autocomplete bg-white shadow-sm rounded-bottom mt-1 py-2 px-3 d-none">
                  <th:block th:each="lic : ${licenseList}">
                    <div class="autocomplete-item py-1 text-dark"
                         th:data-id="${lic.liIdx}"
                         th:data-name="${lic.liName}">
                      <span th:text="${lic.liName}"></span>
                    </div>
                  </th:block>
                </div>
              </div>
            </div>

               <!-- ìê²©ì¦ ì¶”ì²œ ë²„íŠ¼ ì˜ì—­ -->
               <div class="search-suggestion d-flex flex-wrap gap-2">
                 <th:block th:each="lic : ${licenseList}">
                   <a th:href="@{'/redirectByLicense'(liIdx=${lic.liIdx})}"
                      class="btn btn-outline-primary d-inline-flex align-items-center">
                     <span th:text="${lic.liName}"></span>
                     <svg class="bi ms-2" width="16" height="16" aria-hidden="true">
                       <use xlink:href="#arrow-right-short"></use>
                     </svg>
                   </a>
                 </th:block>
                 <div id="plan-usage-slider" class="text-center fw-bold fs-5 my-3"></div>
               </div>
            </div>

            <!-- ğŸ” MyPayment -->
            <th:block th:if="${session.info == null}">
               <div class="card keyword-box">
                  <h4>MyPayment</h4>
                  <p>ë¡œê·¸ì¸ì„ í•´ì£¼ì„¸ìš”</p>
               </div>
            </th:block>

            <th:block th:unless="${session.info == null}">
               <!-- âœ… ê²°ì œí•œ ìê²©ì¦ í™•ì¸ -->
               <div class="card keyword-box">
                  <h4>ê²°ì œí•œ ìê²©ì¦ í™•ì¸</h4>
                  <th:block th:if="${payList != null}">
                     <ul>
                        <th:block th:each="pay : ${payList}">
                           <th:block th:if="${pay.planAct == 1}">
                              <li><a th:href="@{'/license?liIdx=' + ${(pay.planIdx + 1) / 2}}"
                                 th:text="${pay.liName + ((pay.planType != null and pay.planType) ? ' (í•„ìˆ˜í˜•)' : ' (íƒêµ¬í˜•)')}">
                                    ìê²©ì¦ ì´ë¦„ </a></li>
                           </th:block>
                        </th:block>
                     </ul>
                  </th:block>
                  <th:block th:if="${payList == null or #lists.isEmpty(payList)}">
                     <p>ê²°ì œí•œ ìê²©ì¦ì´ ì—†ìŠµë‹ˆë‹¤.</p>
                  </th:block>
               </div>
            </th:block>
         </section>
         <hr class="my-4">

         <!-- ğŸ“¢ ì„œë¹„ìŠ¤ í™ë³´ -->
<!-- Bootstrap Icons CDN -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">

<style>
  body {
    background-color: #ffffff;
    font-family: 'Pretendard', sans-serif;
    color: #1a237e;
  }

  .info-section {
    background-color: #eaf3ff;
    padding: 60px 20px;
    border-radius: 16px;
    max-width: 1200px;
    margin: 40px auto;
  }

  .info-title {
    font-size: 28px;
    font-weight: 700;
    text-align: center;
    margin-bottom: 40px;
    color: #0d47a1;
  }

  .card-box {
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    gap: 20px;
  }

  .promo-card {
    flex: 1 1 calc(25% - 20px);
    background: #ffffff;
    border-radius: 12px;
    padding: 24px;
    text-align: left;
    min-width: 250px;
    box-shadow: 0 4px 12px rgba(33, 150, 243, 0.15);
    transition: transform 0.2s;
  }

  .promo-card:hover {
    transform: translateY(-6px);
  }

  .promo-card i {
    font-size: 36px;
    color: #2196f3;
    margin-bottom: 14px;
  }

  .promo-card h5 {
    font-size: 17px;
    font-weight: 700;
    margin-bottom: 10px;
    color: #0d47a1;
  }

  .promo-card p {
    font-size: 14px;
    color: #37474f;
    margin: 0;
  }

  .faq-section {
    margin-top: 60px;
  }

  .faq-title {
    font-size: 24px;
    font-weight: 600;
    margin-bottom: 24px;
    color: #0d47a1;
  }

  .accordion-button {
    background-color: #ffffff;
    color: #0d47a1;
    font-weight: 500;
  }

  .accordion-button:not(.collapsed) {
    background-color: #dbeeff;
    color: #0d47a1;
  }

  .accordion-body {
    background-color: #ffffff;
    color: #37474f;
  }

  @media (max-width: 768px) {
    .promo-card {
      flex: 1 1 100%;
    }
  }
</style>

<div class="info-section">
  <h2 class="info-title">ì™œ ìš°ë¦¬ í”Œë«í¼ì„ ì„ íƒí•´ì•¼ í• ê¹Œìš”?</h2>

  <!-- í™ë³´ ì¹´ë“œ -->
  <div class="card-box">
    <div class="promo-card">
      <i class="bi bi-ui-checks-grid"></i>
      <h5>ë§ì¶¤í˜• ë¬¸ì œ í’€ì´</h5>
      <p>ì‚¬ìš©ìì˜ ì˜¤ë‹µì„ ë¶„ì„í•´, ì•½ì ì„ ì§‘ì¤‘ ê³µëµí•˜ëŠ” ë¬¸ì œë¥¼ ì¶”ì²œí•©ë‹ˆë‹¤.</p>
    </div>
    <div class="promo-card">
      <i class="bi bi-chat-left-text"></i>
      <h5>ë¬¸ì ì•Œë¦¼ ì„œë¹„ìŠ¤</h5>
      <p>ë§¤ì¼ í•™ìŠµ ë¦¬ë§ˆì¸ë“œ ë¬¸ìë¡œ ê¾¸ì¤€í•œ í•™ìŠµ ìŠµê´€ì„ ë„ì™€ì¤ë‹ˆë‹¤.</p>
    </div>
    <div class="promo-card">
      <i class="bi bi-calendar-week"></i>
      <h5>í•™ìŠµ í• ë‹¹ëŸ‰ ì œê³µ</h5>
      <p>í•˜ë£¨ì— í•´ê²°í•  ë¬¸ì œ ìˆ˜ë¥¼ ìë™ìœ¼ë¡œ ì œì‹œí•´ ê³„íšì ì¸ ê³µë¶€ë¥¼ ìœ ë„í•©ë‹ˆë‹¤.</p>
    </div>
    <div class="promo-card">
      <i class="bi bi-diagram-3"></i>
      <h5>ì²´ê³„ì  í•™ìŠµ ì‹œìŠ¤í…œ</h5>
      <p>ì¶œì œ ê¸°ì¤€ ê¸°ë°˜ìœ¼ë¡œ ë¶„ë¥˜ëœ ì²´ê³„ì  ë¬¸ì œì€í–‰ì„ ê²½í—˜í•˜ì„¸ìš”.</p>
    </div>
  </div>
   
  <!-- ìì£¼ ë¬»ëŠ” ì§ˆë¬¸ -->
  <div class="faq-section">
    <h3 class="faq-title">ìì£¼ ë¬»ëŠ” ì§ˆë¬¸</h3>
    <div class="accordion" id="faqAccordion">

      <div class="accordion-item">
        <h2 class="accordion-header" id="q1">
          <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#a1" aria-expanded="true" aria-controls="a1">
            ì„œë¹„ìŠ¤ëŠ” ì–´ë–»ê²Œ ì‹œì‘í•˜ë‚˜ìš”?
          </button>
        </h2>
        <div id="a1" class="accordion-collapse collapse show" aria-labelledby="q1" data-bs-parent="#faqAccordion">
          <div class="accordion-body">
            íšŒì›ê°€ì… í›„ ì›í•˜ëŠ” ìê²©ì¦ì„ ì„ íƒí•˜ê³ , í•™ìŠµì„ ì‹œì‘í•˜ë©´ ë©ë‹ˆë‹¤. ê°„í¸í•˜ê²Œ ë¬¸ì œí’€ì´ë¥¼ ì‹œì‘í•´ë³´ì„¸ìš”!
          </div>
        </div>
      </div>

      <div class="accordion-item">
        <h2 class="accordion-header" id="q2">
          <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#a2" aria-expanded="false" aria-controls="a2">
            AI ë¬¸ì œ ì¶”ì²œì€ ì–´ë–¤ ê¸°ì¤€ìœ¼ë¡œ ì œê³µë˜ë‚˜ìš”?
          </button>
        </h2>
        <div id="a2" class="accordion-collapse collapse" aria-labelledby="q2" data-bs-parent="#faqAccordion">
          <div class="accordion-body">
            ìµœê·¼ ì˜¤ë‹µ ë¡œê·¸ë¥¼ ë¶„ì„í•´ ì‚¬ìš©ìì˜ ì·¨ì•½ ì£¼ì œë¥¼ íŒŒì•…í•˜ê³ , í•´ë‹¹ ì£¼ì œì˜ ë¬¸ì œë¥¼ ìš°ì„  ì¶”ì²œí•©ë‹ˆë‹¤.
          </div>
        </div>
      </div>

      <div class="accordion-item">
        <h2 class="accordion-header" id="q3">
          <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#a3" aria-expanded="false" aria-controls="a3">
            ë¬¸ì ì•Œë¦¼ì€ ì–´ë–¤ ì‹œê°„ì— ì˜¤ë‚˜ìš”?
          </button>
        </h2>
        <div id="a3" class="accordion-collapse collapse" aria-labelledby="q3" data-bs-parent="#faqAccordion">
          <div class="accordion-body">
            ë§¤ì¼ ì˜¤ì „ 9ì‹œì— í•™ìŠµ ë¦¬ë§ˆì¸ë“œ ë¬¸ìê°€ ë°œì†¡ë©ë‹ˆë‹¤.
          </div>
        </div>
      </div>

      <div class="accordion-item">
        <h2 class="accordion-header" id="q4">
          <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#a4" aria-expanded="false" aria-controls="a4">
            ìê²©ì¦ ì¢…ë¥˜ëŠ” ì–´ë–¤ ê±¸ ì§€ì›í•˜ë‚˜ìš”?
          </button>
        </h2>
        <div id="a4" class="accordion-collapse collapse" aria-labelledby="q4" data-bs-parent="#faqAccordion">
          <div class="accordion-body">
            ì •ë³´ì²˜ë¦¬ê¸°ì‚¬, ì‚°ì—…ì•ˆì „ì‚°ì—…ê¸°ì‚¬ë¥¼ ì§€ì›í•˜ê³  ìˆìœ¼ë©°, ì§€ì†ì ìœ¼ë¡œ í™•ì¥ ì¤‘ì…ë‹ˆë‹¤.
          </div>
        </div>
      </div>

      <div class="accordion-item">
        <h2 class="accordion-header" id="q5">
          <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#a5" aria-expanded="false" aria-controls="a5">
            í™˜ê¸‰ ì œë„ëŠ” ì–´ë–»ê²Œ ì´ìš©í•˜ë‚˜ìš”?
          </button>
        </h2>
        <div id="a5" class="accordion-collapse collapse" aria-labelledby="q5" data-bs-parent="#faqAccordion">
          <div class="accordion-body">
            ì‹œí—˜ í•©ê²© í›„ ì¦ë¹™ ìë£Œ ì œì¶œ ì‹œ í™˜ê¸‰ ì‹ ì²­ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤. ìì„¸í•œ ì¡°ê±´ì€ [í™˜ê¸‰ ì•ˆë‚´ í˜ì´ì§€]ë¥¼ ì°¸ê³ í•´ ì£¼ì„¸ìš”.
          </div>
        </div>
      </div>

    </div>
  </div>
</div>

      </div>

   <!-- Footer -->
   <footer class="footer mt-5 py-4 border-top">
     <div class="container text-center">
       <nav class="nav justify-content-center mb-3">
         <a href="#" class="footer-link">Home</a>
         <a href="#" class="footer-link">About</a>
         <a href="#" class="footer-link">Contact</a>
       </nav>
       <p class="text-muted small mb-0">Â© 2025 ë¬¸ì œ Issue!</p>
     </div>
   </footer>

   <!-- JS -->
   <script>
    document.addEventListener('DOMContentLoaded', function () {
      const input = document.getElementById('searchInput');
      const suggestions = document.getElementById('suggestions');
      const clearBtn = document.getElementById('clearBtn');
      const searchBtn = document.getElementById('searchBtn');
      let selectedId = null;

      if (input && suggestions) {
        suggestions.addEventListener('click', function (e) {
          const item = e.target.closest('.autocomplete-item');
          if (item) {
            input.value = item.dataset.name;
            selectedId = item.dataset.id;
            suggestions.classList.add('d-none');
          }
        });

        input.addEventListener('input', function () {
          selectedId = null;
          suggestions.classList.toggle('d-none', input.value.trim() === '');
        });

        clearBtn?.addEventListener('click', function () {
          input.value = '';
          selectedId = null;
          suggestions.classList.add('d-none');
        });

        searchBtn?.addEventListener('click', function () {
          if (selectedId) {
            window.location.href = `/redirectByLicense?liIdx=${selectedId}`;
          } else {
            alert('í•´ë‹¹í•˜ëŠ” ìê²©ì¦ì€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.');
          }
        });
      }

      // ğŸ“¢ í”Œëœ ì´ìš©ì ìˆ˜ ìŠ¬ë¼ì´ë“œ ì¶œë ¥
      const usageDiv = document.getElementById("plan-usage-slider");
      let usageList = [];
      let currentIndex = 0;

      function showNext() {
        usageDiv.classList.add('fade-out');
        setTimeout(() => {
          const item = usageList[currentIndex];
          usageDiv.textContent = `í˜„ì¬ ${item.licenseName} ${item.planName} í”Œëœì„ ${item.userCount}ëª…ì´ ì´ìš© ì¤‘ì…ë‹ˆë‹¤.`;
          usageDiv.classList.remove('fade-out');
          currentIndex = (currentIndex + 1) % usageList.length;
        }, 500);
      }

      fetch("/main/plan-usage")
        .then(res => res.json())
        .then(data => {
          usageList = data;
          if (usageList.length > 0) {
            showNext();
            setInterval(showNext, 3000);
          }
        })
        .catch(err => {
          console.error("í”Œëœ ì´ìš© ì •ë³´ ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨:", err);
        });
    });
  </script>
   

</body>
</html>
